<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>K-Level PDF Generator</title>
  <style>
    body { font-family: system-ui, sans-serif; background: #f6f9ff; padding: 20px; }
    .container { max-width: 980px; margin: auto; }
    label { display: block; margin-top: 10px; font-weight: bold; }
    input, select, button { margin-top: 5px; padding: 8px; font-size: 14px; }
    #rows { max-height: 300px; overflow-y: auto; border: 1px dashed #cbd5e1; padding: 5px; margin-top: 5px; }
    .row { display: grid; grid-template-columns: 60px repeat(6, 1fr); gap: 5px; align-items: center; margin-bottom: 5px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>K-Level PDF Generator</h1>
    <label>College</label>
    <input id="college" value="Government Arts College, Nandanam, Chennai-35.">
    <label>Department</label>
    <input id="department" value="III-B.SC.COMPUTER SCIENCE">
    <label>Subject Name</label>
    <input id="subjectName" value="Big Data Analytics">
    <label>Subject Code</label>
    <input id="subjectCode" value="224160">
    <label>Register No.</label>
    <input id="regno">
    <label>Student Name</label>
    <input id="student">
    <label>Total Questions</label>
    <input id="qcount" type="number" min="1" max="200" value="25">
    
    <div id="rows"></div>
    <button id="generate">Generate PDF</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    const { jsPDF } = window.jspdf;

    const rowsWrap = document.getElementById('rows');
    const qcountEl = document.getElementById('qcount');

    function makeRow(q){
      const div = document.createElement('div');
      div.className = 'row';
      const qLabel = document.createElement('div');
      qLabel.textContent = q;
      div.appendChild(qLabel);
      for(let k=1;k<=6;k++){
        const sel = document.createElement('select');
        sel.innerHTML = `<option value="">(o)</option><option value="K${k}">(‚óè)</option>`;
        div.appendChild(sel);
      }
      return div;
    }

    function renderRows(){
      rowsWrap.innerHTML = '';
      const n = parseInt(qcountEl.value||'1',10);
      for(let i=1;i<=n;i++) rowsWrap.appendChild(makeRow(i));
    }

    qcountEl.addEventListener('change', renderRows);
    renderRows();

    document.getElementById('generate').addEventListener('click', ()=>{
      const doc = new jsPDF();
      let y = 10;
      const college = document.getElementById('college').value;
      const dept = document.getElementById('department').value;
      const subjName = document.getElementById('subjectName').value;
      const subjCode = document.getElementById('subjectCode').value;
      const reg = document.getElementById('regno').value;
      const student = document.getElementById('student').value;

      doc.setFontSize(14);
      doc.text(college, 105, y, { align: 'center' }); y+=8;
      doc.setFontSize(12);
      doc.text(`Student Name: ${student}`, 10, y); y+=6;
      doc.text(`Register No: ${reg}`, 10, y); y+=6;
      doc.text(`Department: ${dept}`, 10, y); y+=6;
      doc.text(`Subject Name: ${subjName}`, 10, y); y+=6;
      doc.text(`Subject Code: ${subjCode}`, 10, y); y+=10;

      // Table header
      doc.setFont(undefined, 'bold');
      doc.text('Q.No', 10, y);
      for(let i=1;i<=6;i++) doc.text(`K${i}`, 30 + (i-1)*20, y);
      y+=6;
      doc.setFont(undefined, 'normal');

      const rows = Array.from(rowsWrap.children);
      rows.forEach(row=>{
        const cells = row.querySelectorAll('div, select');
        const q = cells[0].textContent;
        doc.text(q, 10, y);
        for(let i=1;i<=6;i++){
          const sel = cells[i];
          const text = sel.value || '(o)';
          doc.text(text, 30 + (i-1)*20, y);
        }
        y+=6;
        if(y>280){ doc.addPage(); y=10; }
      });

      doc.save(`KLevel_${student||'student'}.pdf`);
    });
  </script>
</body>
</html>
